<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Fish</title>
    <link rel="icon" href="{{ url_for('static', filename='phising-icon.png') }}" athor="Hanis Tusiyani">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <!-- For Icons  -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='Style.css') }}">
</head>
<body data-bs-theme="dark">
    <nav class="navbar bg-body-tertiary">
        <div id="nav" class="container-fluid">
            <h2 class="navbar-brand angler-title">Angler</h2>
            <div class="navbar-nav">
                <a class="nav-link" href="/">Home</a>
                <a class="nav-link" href="/Forum">Forum</a>
                <a class="nav-link" href="/Statistics">Statistics</a>
                <a class="nav-link" href="/Account">Account</a>
                <a class="nav-link" href="/AboutUs">About Us</a>
            </div>
        </div>
      
        <!-- Download dropdown + Login/Logout buttons -->
<div class="d-flex gap-2 align-items-center">
    <!-- Download dropdown -->
    <div class="dropdown me-2">
        <button id="download_btn" class="btn btn-success dropdown-toggle" type="button" data-bs-toggle="dropdown">
            Download
        </button>
        <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#" id="downloadEmails">Download Emails</a></li>
            <li><a class="dropdown-item" href="#" id="downloadAnalysis">Download Analysis</a></li>
            <li><a class="dropdown-item" href="#" id="downloadBoth">Download Emails & Analysis</a></li>
        </ul>
    </div>

    <!-- Login / Logout button -->
    {% if session.name %}
        <button id="Logout_btn" class="btn btn-light">
            <i class="bi bi-box-arrow-right me-2"></i>Logout
        </button>
    {% else %}
        <button id="Login_btn" class="btn btn-light">
            <i class="bi bi-box-arrow-in-right me-2"></i>Login
        </button>
    {% endif %}
</div>

    </nav>
    <div id="LoginContainer">
        <div id="Login" class="centered colored-border">
            <div id="Close_Login">
                <button type="button" id="SignIn/Up" class="btn">
                    <i class="bi bi-person-plus me-2" aria-hidden="true"></i>Sign up
                </button>
                <button type="button" class="btn btn-secondary">✕</button>
            </div>
            {% if session.name %}
                <!-- Logout -->
                <button type="submit" id="Logout_btn" class="btn btn-primary">
                    <i class="bi bi-box-arrow-right me-2" aria-hidden="true"></i>Sign out
                </button>
            {% else %}
                <!-- Login -->
            <div id="SignInError" class="alert alert-danger" role="alert" style="display: none;"></div>
            <form action="/login" method="post" id="SignIn">
                <div class="mb-3">
                    <label for="name" class="form-label">Enter your Username</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Usermane" required>
                </div>
                <div class="mb-3">
                    <label for="pass" class="form-label">Enter your password:</label>
                    <input type="password" class="form-control" id="pass" name="pass" placeholder="Password" required>
                </div>
                <button type="submit" class="btn btn-primary">Sign in</button>
            </form>
                <!-- Signup -->
            <div id="SignUpError" class="alert alert-danger" role="alert" style="display: none;"></div>
            <form action="/Signup" method="post" id="SignUp" class="hidden">
                <div class="mb-3">
                    <label for="Username" class="form-label">Enter your Username</label>
                    <input type="text" class="form-control" id="Username" name="Username" placeholder="Usermane" required>
                </div>
                <div class="mb-3">
                    <label for="pass-req" class="form-label">Enter your password:</label>
                    <input type="password" class="form-control" id="pass-req" name="Password" placeholder="Password" required>
                </div>
                <!-- Password requirements checklist -->
                <div id="password-requirements" class="mb-3 small text-muted">
                    <p class="mb-1 fw-semibold">Password requirements</p>
                    <ul class="list-unstyled ms-3" style="line-height:1.5">
                        <li id="req-length">❌ At least 8 characters (recommended 16+)</li>
                        <li id="req-lower">❌ Contains a lowercase letter</li>
                        <li id="req-upper">❌ Contains an uppercase letter</li>
                        <li id="req-number">❌ Contains a number</li>
                        <li id="req-symbol">❌ Contains a symbol</li>
                    </ul>
                </div>
                <div class="mb-3">
                    <label for="pass-ver" class="form-label">Verify your password:</label>
                    <input type="password" class="form-control" id="pass-ver" name="pass-ver" placeholder="Password" required>
                </div>
                <div id="password-match" class="mb-3 small text-muted">❌ Passwords do not match</div>
                <div id="signupError" class="mb-3" style="display:none"></div>
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-person-plus me-2" aria-hidden="true"></i>Create account
                </button>
            </form>
            {% endif %}
        </div>
    </div>
   {% block content %}{% endblock %}
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <!-- Bootstrap JS + Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Download Error Popup Modal -->
<div class="modal fade" id="downloadErrorModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">Download Unavailable</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="downloadErrorMessage"></div>
    </div>
  </div>
</div>

</body>
</html>
